id: https://w3id.org/omop
name: omopcdm
description: |-
  Information about people
license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  linkml: https://w3id.org/linkml/
  person: https://w3id.org/linkml/examples/person
  omop: https://w3id.org/omop/
imports:
  - linkml:types
prefixes:
default_prefix: person
default_range: string

classes:
  CONCEPT:
    class_uri: schema:Concept
    slots:
      - CONCEPT_ID
      - CONCEPT_NAME
      - DOMAIN_ID
      - VOCABULARY_ID
      - CONCEPT_CLASS_ID
      - STANDARD_CONCEPT
      - CONCEPT_CODE
      - VALID_START_DATE
      - VALID_END_DATE
      - INVALID_REASON

  PERSON:
    class_uri: schema:Person
    slots:
      - PERSON_ID
      - GENDER_CONCEPT_ID
      - YEAR_OF_BIRTH
      - MONTH_OF_BIRTH
      - DAY_OF_BIRTH
      - BIRTH_DATETIME
      - RACE_CONCEPT_ID
      - ETHNICITY_CONCEPT_ID
      - LOCATION_ID
      - PROVIDER_ID
      - CARE_SITE_ID
      - PERSON_SOURCE_VALUE
      - GENDER_SOURCE_VALUE
      - GENDER_SOURCE_CONCEPT_ID
      - RACE_SOURCE_VALUE
      - RACE_SOURCE_CONCEPT_ID
      - ETHNICITY_SOURCE_VALUE
      - ETHNICITY_SOURCE_CONCEPT_ID
  
  Container:
    tree_root: true
    attributes:
      persons:
        multivalued: true
        inlined_as_list: true
        range: Person

slots:

  # CONCEPT
  CONCEPT_ID:
    aliases:
    - concept
    range: integer
    required: true
    identifier: true
    description: A unique identifier for each Concept across all domains.
  CONCEPT_NAME:
    range: integer
    required: true
    identifier: false
    description: An unambiguous, meaningful and descriptive name for the Concept.
  DOMAIN_ID:
    range: integer
    required: true
    identifier: false
    description: A foreign key to the DOMAIN table the Concept belongs to.
  VOCABULARY_ID:
    range: integer
    required: true
    identifier: false
    description: A foreign key to the VOCABULARY table indicating from which source the Concept has been adapted.
  CONCEPT_CLASS_ID:
    range: integer
    required: true
    identifier: false
    description: The attribute or concept class of the Concept. Examples are "Clinical Drug", "Ingredient", "Clinical Finding" etc.
  STANDARD_CONCEPT:
    range: integer
    required: true
    identifier: false
    description: This flag determines where a Concept is a Standard Concept, i.e. is used in the data, a Classification Concept, or a non-standard Source Concept. The allowable values are "S" (Standard Concept) and "C" (Classification Concept), otherwise the content is NULL.
  CONCEPT_CODE:
    range: integer
    required: true
    identifier: false
    description: The concept code represents the identifier of the Concept in the source vocabulary, such as SNOMED-CT concept IDs, RxNorm RXCUIs etc. Note that concept codes are not unique across vocabularies.
  VALID_START_DATE:
    range: integer
    required: true
    identifier: false
    description: The date when the Concept was first recorded. The default value is 1-Jan-1970, meaning, the Concept has no (known) date of inception.
  VALID_END_DATE:
    range: integer
    required: true
    identifier: false
    description: The date when the Concept became invalid because it was deleted or superseded (updated) by a new concept. The default value is 31-Dec-2099, meaning, the Concept is valid until it becomes deprecated.
  INVALID_REASON:
    range: integer
    required: true
    identifier: false
    description: Reason the Concept was invalidated. Possible values are D (deleted), U (replaced with an update) or NULL when valid_end_date has the default value.

  # PERSON
  PERSON_ID:
    range: integer
    required: true
    identifier: true
    description: It is assumed that every person with a different unique identifier is in fact a different person and should be treated independently.
    comments: Any person linkage that needs to occur to uniquely identify Persons ought to be done prior to writing this table. This identifier can be the original id from the source data provided if it is an integer, otherwise it can be an autogenerated number.
  GENDER_CONCEPT_ID:
    range: integer
    required: true
    description: This field is meant to capture the biological sex at birth of the Person. This field should not be used to study gender identity issues.
    comments: Use the gender or sex value present in the data under the assumption that it is the biological sex at birth. If the source data captures gender identity it should be stored in the OBSERVATION table.
    pattern: \b(8532|8507)\b
  YEAR_OF_BIRTH:
    range: integer
    required: true
    description: Compute age using year_of_birth. 
    comments: For data sources with date of birth, the year should be extracted. For data sources where the year of birth is not available, the approximate year of birth could be derived based on age group categorization, if available. 
    minimum_value: 1800
    maximum_value: 2200
  MONTH_OF_BIRTH:
    range: integer
    description:
    comments: For data sources that provide the precise date of birth, the month should be extracted and stored in this field. 
    minimum_value: 1
    maximum_value: 12
  DAY_OF_BIRTH:
    range: integer
    description:
    comments: For data sources that provide the precise date of birth, the day should be extracted and stored in this field. 
    minimum_value: 1
    maximum_value: 31
  BIRTH_DATETIME:
    range: datetime
    description: 
    comments: This field is not required but highly encouraged. For data sources that provide the precise datetime of birth, that value should be stored in this field. If birth_datetime is not provided in the source, use the following logic to infer the date. If day_of_birth is null and month_of_birth is not null then use the first of the month in that year. If month_of_birth is null or if day_of_birth AND month_of_birth are both null and the person has records during their year of birth then use the date of the earliest record, otherwise use the 15th of June of that year. If time of birth is not given use midnight (00:00:0000). 	
  RACE_CONCEPT_ID:
    range: integer
    required: true
    description: This field captures race or ethnic background of the person.
    comments: Only use this field if you have information about race or ethnic background. The Vocabulary contains Concepts about the main races and ethnic backgrounds in a hierarchical system. Due to the imprecise nature of human races and ethnic backgrounds, this is not a perfect system. Mixed races are not supported. If a clear race or ethnic background cannot be established, use Concept_Id 0. Accepted Race Concepts.
  ETHNICITY_CONCEPT_ID:
    range: integer
    required: true
    description: This field captures Ethnicity as defined by the Office of Management and Budget (OMB) of the US Government. It distinguishes only between “Hispanic” and “Not Hispanic”. Races and ethnic backgrounds are not stored here.
    comments: Only use this field if you have US-based data and a source of this information. Do not attempt to infer Ethnicity from the race or ethnic background of the Person. Accepted ethnicity concepts
  LOCATION_ID:
    range: integer
    required: true
    description: The location refers to the physical address of the person. This field should capture the last known location of the person.
    comments: Put the location_id from the LOCATION table here that represents the most granular location information for the person. This could represent anything from postal code or parts thereof, state, or county for example. Since many databases contain deidentified data, it is common that the precision of the location is reduced to prevent re-identification. This field should capture the last known location.
  PROVIDER_ID:
    range: integer
    required: true
    description: The Provider refers to the last known primary care provider (General Practitioner). 
    comments: Put the provider_id from the PROVIDER table of the last known general practitioner of the person. If there are multiple providers, it is up to the ETL to decide which to put here.
  CARE_SITE_ID:
    range: integer
    required: true
    description: The Care Site refers to where the Provider typically provides the primary care.
    comments:
  PERSON_SOURCE_VALUE:
    range: string
    description: Use this field to link back to persons in the source data. This is typically used for error checking of ETL logic.
    comments: Some use cases require the ability to link back to persons in the source data. This field allows for the storing of the person value as it appears in the source. This field is not required but strongly recommended.
  GENDER_SOURCE_VALUE:
    range: string
    description: This field is used to store the biological sex of the person from the source data. It is not intended for use in standard analytics but for reference only.
    comments: Put the biological sex of the person as it appears in the source data.
  GENDER_SOURCE_CONCEPT_ID:
    range: integer
    description: Due to the small number of options, this tends to be zero.
    comments: If the source data codes biological sex in a non-standard vocabulary, store the concept_id here.
  RACE_SOURCE_VALUE:
    range: string
    description: This field is used to store the race of the person from the source data. It is not intended for use in standard analytics but for reference only.
    comments: Put the race of the person as it appears in the source data.
  RACE_SOURCE_CONCEPT_ID:
    range: integer
    description: Due to the small number of options, this tends to be zero.
    comments: If the source data codes race in an OMOP supported vocabulary store the concept_id here.
  ETHNICITY_SOURCE_VALUE:
    range: string
    description: This field is used to store the ethnicity of the person from the source data. It is not intended for use in standard analytics but for reference only.
    comments: If the person has an ethnicity other than the OMB standard of “Hispanic” or “Not Hispanic” store that value from the source data here.
  ETHNICITY_SOURCE_CONCEPT_ID:
    range: integer
    description: Due to the small number of options, this tends to be zero.
    comments: If the source data codes ethnicity in an OMOP supported vocabulary, store the concept_id here.

